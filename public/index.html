<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chrome Sync</title>
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<h2>Chrome Sync</h2>
<input type="text" id="urlInput" placeholder="ضع رابط هنا" size="50">
<button id="openTabs">فتح التبويبات</button>
<button id="startSync">تشغيل المزامنة</button>

<script>
const socket = io();

document.getElementById('openTabs').onclick = () => {
  const url = document.getElementById('urlInput').value;
  if (!url) return alert('ضع رابط أولاً');
  socket.emit('openTabs', url);
};

document.getElementById('startSync').onclick = () => {
  alert('ابدأ بالكتابة أو النقر في التبويبة الأولى. باقي التبويبات ستزامن تلقائياً.');
};

// مثال: مزامنة كتابة أو نقرة من التبويبة الأولى
document.addEventListener('click', (e) => {
  if (e.target.tagName === 'BUTTON') return;
  socket.emit('syncEvent', { type: 'click', selector: e.target.tagName.toLowerCase() });
});

document.addEventListener('input', (e) => {
  socket.emit('syncEvent', { type: 'input', selector: e.target.tagName.toLowerCase(), value: e.target.value });
});
</script>
</body>
</html>
